<link rel="import" href="../../bower_components/neon-animation/neon-animations.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animation-runner-behavior.html">

<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">

<dom-module id="ui-page">
    <template>
        <style>
            :host {
                display: none;
                height: 100vh;
                width: 100%;
                position: absolute;
                top: 0;
                left: 0;
                z-index: 6;

                --iron-icon-height: 75px;
                --iron-icon-width: 75px;
            }
            #placeholder {
                background-color: #999;
            }

            iron-icon {
                position: absolute;
                top: 1vh;
                left: 1vw;
                color: black;
                z-index: 7;
            }
        </style>
        
        <iron-icon icon="close" on-tap="close"></iron-icon>
        <div id="placeholder" class="fit"></div>
        <div id="container">
            <content></content>
        </div>

    </template>
    <script>
        Polymer({
            is: 'ui-page',

            behaviors: [
                Polymer.NeonAnimationRunnerBehavior
            ],

            properties: {
                opened: Boolean,
                
                animationConfig: {
                    value: function() {
                        return {
                            'entry': {
                                name: 'scale-up-animation',
                                node: this
                            },
                            'exit': {
                                name: 'fade-out-animation',
                                node: this
                            }
                        }
                    }
                }
            },

            listeners: {
                'neon-animation-finish': '_onNeonAnimationFinish'
            },
            
            show: function() {
                this.opened = true;
                this.style.display = 'inline-block';
                this.playAnimation('entry');
            },

            close: function() {
                this.opened = false;
                this.playAnimation('exit');
            },

            _onNeonAnimationFinish: function() {
                if (!this.opened) {
                  this.style.display = 'none';
                }
            }
        });
    </script>
</dom-module>